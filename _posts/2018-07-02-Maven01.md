---
title: Maven基础
date: 2018-07-19 19:01:09
categories:
    - Maven
tags:
    - Maven basic
---

Apache Maven是一个软件项目管理和综合工具，和它相似的还有Ant、Gradle等。本文将介绍Maven的基本使用。

<!-- more -->

- 目录
    - I.介绍
    - II.安装配置
    - III.快速入门
    - IV.核心知识

---

# I.介绍
Maven是基于项目对象模型project object model（POM）的项目管理工具，通过一小段描述信息管理项目的构建、报告和文档。


# II.安装配置
目的是让mvn命令全局可用。这里是基于Ubuntu 16.04LTS进行安装配置，其他操作系统思路一样，具体自行解决

#### 1.安装
* 1.[官网下载](http://maven.apache.org/download.cgi)
- 2.解压
```
$ sudo tar zxvf apache-maven-3.3.9-bin.tar.gz -C /opt
```
- 3.配置环境变量
```
# 用sublime编辑环境变量配置文件，会对所有用户起效
$ sudo subl /etc/profile
```

> 在profile文件后增加内容
```
export M2_HOME=/opt/maven/apache-maven-3.3.9
export PATH=$PATH:$M2_HOME/bin
```

```
# 使配置不用登录立刻生效
$ source /etc/profile
```

```
# 验证
$ echo $M2_HOME
$ echo $PATH
$ mvn -v
```

- 4.说明：
    - Maven 3.3+要求JDK1.7及以上

#### 2.目录结构
- bin：mvn运行脚本
- boot：maven使用的类加载器框架，会加载lib中的类库到内存
- conf：配置文件
- lib：maven运行时使用的类库，也包括它所依赖的第三方类库
- LICENSE：Maven使用软件许可证Apache License Version2.0
- NOTICE：记录了Maven包含的第三方软件
- READAME：简介说明等


# III.快速入门
##### 1.创建工程
手动helloworld工程，包括：文件夹，java代码，POM文件
```
~/helloworld$ tree
.
├── pom.xml
└── src
    ├── main
    │   └── java
    │       └── com
    │           └── baicai
    │               └── hello
    │                   └── HelloWorld.java
    ├── resources
    └── test
        └── java
            └── com
                └── baicai
                    └── hello
                        └── HelloWorldTest.java
```

```
package com.baicai.hello;

public class HelloWorld {
    public String sayHello() {
        return "Hello Maven!";
    }
}
```

```
package com.baicai.hello;

import org.junit.*;
import org.junit.Assert.*;

public class HelloWorldTest {
    @Test
    public void testHello() {
        Assert.assertEquals("Hello Maven!", new HelloWorld().sayHello());
    }
}
```

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.baicai.helloworld</groupId>
    <artifactId>helloworld-model</artifactId>
    <version>0.0.1SNAPSHOT</version>
    
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
        </dependency>
    </dependencies>
</project>
```

##### 2.编译

```
$ mvn compile
```
    
> 对工程进行编译，生成target目录，包含源文件的字节码文件等

```
├── pom.xml
├── src
│   ├── main
│   │   └── java
│   │       └── com
│   │           └── baicai
│   │               └── hello
│   │                   └── HelloWorld.java
│   ├── resources
│   └── test
│       └── java
│           └── com
│               └── baicai
│                   └── hello
│                       └── HelloWorldTest.java
└── target
    ├── classes
    │   └── com
    │       └── baicai
    │           └── hello
    │               └── HelloWorld.class
    ├── generated-sources
    │   └── annotations
    └── maven-status
        └── maven-compiler-plugin
            └── compile
                └── default-compile
                    ├── createdFiles.lst
                    └── inputFiles.lst
```

##### 3.测试
```
$ mvn test
```

> 进行测试，生成测试代码的字节码文件、测试reports等

```
├── pom.xml
├── src
│   ├── main
│   │   └── java
│   │       └── com
│   │           └── baicai
│   │               └── hello
│   │                   └── HelloWorld.java
│   ├── resources
│   └── test
│       └── java
│           └── com
│               └── baicai
│                   └── hello
│                       └── HelloWorldTest.java
└── target
    ├── classes
    │   └── com
    │       └── baicai
    │           └── hello
    │               └── HelloWorld.class
    ├── generated-sources
    │   └── annotations
    ├── generated-test-sources
    │   └── test-annotations
    ├── maven-status
    │   └── maven-compiler-plugin
    │       ├── compile
    │       │   └── default-compile
    │       │       ├── createdFiles.lst
    │       │       └── inputFiles.lst
    │       └── testCompile
    │           └── default-testCompile
    │               ├── createdFiles.lst
    │               └── inputFiles.lst
    ├── surefire-reports
    │   ├── com.baicai.hello.HelloWorldTest.txt
    │   └── TEST-com.baicai.hello.HelloWorldTest.xml
    └── test-classes
        └── com
            └── baicai
                └── hello
                    └── HelloWorldTest.class
```

##### 4.打包
```
$ mvn package
```

> 打包工程，生成helloworld-model-0.0.1SNAPSHOT.jar包

```
├── pom.xml
├── src
│   ├── main
│   │   └── java
│   │       └── com
│   │           └── baicai
│   │               └── hello
│   │                   └── HelloWorld.java
│   ├── resources
│   └── test
│       └── java
│           └── com
│               └── baicai
│                   └── hello
│                       └── HelloWorldTest.java
└── target
    ├── classes
    │   └── com
    │       └── baicai
    │           └── hello
    │               └── HelloWorld.class
    ├── generated-sources
    │   └── annotations
    ├── generated-test-sources
    │   └── test-annotations
    ├── helloworld-model-0.0.1SNAPSHOT.jar
    ├── maven-archiver
    │   └── pom.properties
    ├── maven-status
    │   └── maven-compiler-plugin
    │       ├── compile
    │       │   └── default-compile
    │       │       ├── createdFiles.lst
    │       │       └── inputFiles.lst
    │       └── testCompile
    │           └── default-testCompile
    │               ├── createdFiles.lst
    │               └── inputFiles.lst
    ├── surefire-reports
    │   ├── com.baicai.hello.HelloWorldTest.txt
    │   └── TEST-com.baicai.hello.HelloWorldTest.xml
    └── test-classes
        └── com
            └── baicai
                └── hello
                    └── HelloWorldTest.class
```

##### 5.clean
```
$ mvn clean
```

> 删除target目录。删除后如下

```
├── pom.xml
└── src
    ├── main
    │   └── java
    │       └── com
    │           └── baicai
    │               └── hello
    │                   └── HelloWorld.java
    ├── resources
    └── test
        └── java
            └── com
                └── baicai
                    └── hello
                        └── HelloWorldTest.java
```


# IV.核心知识
### 1.Maven工程的目录结构
```
├── pom.xml
└── src
    ├── main
    │   └── java
    │       └── package
    ├── test
    │   └── java
    │       └── package
    └── resources
```

# 4.创建WEB项目