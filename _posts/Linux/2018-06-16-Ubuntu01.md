---
title: Ubuntu环境搭建
date: 2018-06-16 19:01:09
categories:
    - Linux
tags:
    - Linux
    - Ubuntu
    - Basic
---

CentOS、Ubuntu和Debian等都是优秀的Linux发行版，而Ubuntu有着靓丽的用户界面和丰富的技术社区，很适合开发者个人使用。本文将介绍Ubuntu的Java开发环境搭建

<!-- more -->

##### 目录
+ I.Ubuntu安装
+ II.基本环境配置


---

# I.安装

#### 1.启动盘制作

> 不同操作系统下的制作方式不同。这里只介绍Ubuntu系统下制作，其他系统自行解决（如Windows中使用UltraISO）

- 1.[官网下载](https://www.ubuntu.com/download)iso镜像
- 2.Ubuntu平台下使用Startup Disk Creator软件制作启动盘。或使用dd命令行完成

```
# 查看U盘设备名，如/dev/sdb
fdisk -l

# 格式化U盘
mkfs.fat U盘名 -I

# 将镜像写入U盘
dd if=ubuntu-18.04.1-desktop-amd64.iso of=U盘名
```

#### 2.安装

> 前提：[BIOS设置U盘启动](https://blog.csdn.net/juzimemeda/article/details/78855877)，自行解决

- Welcome界面：选择English，Install Ubuntu
- Preparing to install Ubuntu：两个都勾选，会下载一些更新及第三方软件
- Installation type：选择someting else，手动分区
- 分区（这里以一块200G硬盘为例）

|目录|大小|分区|格式|说明|
|:--|:---|:--|:--|:---|
|/  |30G |primary主分区|ext4|根目录，必须要有，其他目录都挂载/下|
|swap|=内存大小|logical逻辑分区|swap|交换空间，相当于Windows中的虚拟内存|
|/boot|400M|logical逻辑分区|ext4|存放Linux的内核vmlinuz及引导系统程序所需要的文件initrd.img等|
|/home|选则剩下的所有空间|logical逻辑分区|ext4|用户工作目录，存放个人配置文件和环境变量等|

> 用-去除之前的分区策略，用+在空闲容量上逐个添加。其他未明确定义的目录都会挂载到/下

- Where are you：shanghai
- Keyboard layout键盘布局：English(US)
- Who are you：设置用户名密码
- 开始安装

> 安装完成后，使用创建的用户登录，设置一下root账号的密码

```
sudo passwd
```

#### 3.修改下载源source

- 方式1：在Software&Updates图形界面的Ubuntu Software中，设置Download from，选择mirrors.aliyun.com即可
- 方式2：终端中修改

```
sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
# 没有vim，先用vi也可以
sudo vim /etc/apt/sources.list

# 使用:1,$d删除文件所有内容，然后更新为下列源，保存

deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
```

```
# 更新软件列表：从源中读取软件列表，获取最新的软件包列表到本地（包含一些软件包信息，如是否更新过）
sudo apt-get update

# 更新本地软件：将本地已安装软件与刚下载的软件列表对比，版本太低会提示更新
sudo apt-get upgrade
```

#### 4.其他常用命令安装

- vim

```
sudo apt-get install vim
```

# II.开发环境配置

#### JDK

> - 官网需要登录后才能[下载](http://www.oracle.com/technetwork/java/javase/archive-139210.html)

```
# 把JDK看做必备的运行库就安装在/usr/lib下，也可以看做三方软件安装在/opt下
cd /usr/lib
mkdir java
cd /usr/lib/java

```

#### SSH Server

#### Git

- 1.安装

```
sudo apt-get update
sudo apt-get install git
git --version
git config --global user.name "xxx"
git config --global user.email "xxx"
git config --list
```

- 2.配置

#### Mysql

#### Maven

#### Tomcat

#### IDEA

#### Eclipse

#### Chrome

> Ubuntu自带FireFox浏览器

前往官网下载适合Ubuntu的deb安装包，双击安装即可。默认安装到/opt

#### 搜狗输入法

- 1.[官网下载](https://pinyin.sogou.com/linux/)，双击或使用以下命令安装

```
sudo dpkg -i sogoupinyin_2.2.0.0108_amd64.deb
```

- 2.配置

> - 1.在Region&Language中，Manage Installed Languages会安装Language Support
> - 2.在Language Support中，将IBus修改为fcitx。重启reboot
> - 3.右上角会有fcitx，或者在Dash Home中搜索fctix，进入fcitx configuration中
> - 4.添加+input method，取消勾选Only Show Current Language，即可搜索到sogou，完成添加即可
> - 5.如有需要，可以在Global Config中设置快捷键。设置不生效可重启电脑

#### sublime

##### 方式1

> 按照[官方文档](https://www.sublimetext.com/docs/3/linux_repositories.html)的apt方式安装

- 1.安装GPG key

```
wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -
```

- 2.确保apt能使用https源

```
sudo apt-get install apt-transport-https
```

- 3.使用稳定版源

```
echo "deb https://download.sublimetext.com/ apt/stable/" | sudo tee /etc/apt/sources.list.d/sublime-text.list
```

- 4.更新软件列表并安装

```
sudo apt-get update
sudo apt-get install sublime-text
```

- 5.最后可在Dash Home中见到Sublime-text的软件图标，点击就可使用了，可以锁定到启动器

##### 方式2

- 1.添加Sublime-text-3软件包的软件源

```
sudo add-apt-repository ppa:webupd8team/sublime-text-3
```

- 2.使用以下命令更新系统软件源

```
sudo apt-get update
```

- 3.使用以下命令安装Sublime-text-3

```
sudo apt-get install sublime-text-installer
```

- 4.最后可在Dash Home中见到Sublime-text的软件图标，点击就可使用了，可以锁定到启动器

#### 方式3

> 也可以下载安装包安装，[详见官网](https://www.sublimetext.com/3)

#### sublime中使用搜狗输入法

> 已安装搜狗输入法和Sublime Text3

- 1.~目录下创建文件sudo vi sublime_imfix.c，内容如下

```
#include <gtk/gtkimcontext.h>
void gtk_im_context_set_client_window (GtkIMContext *context,
         GdkWindow    *window)
{
GtkIMContextClass *klass;
g_return_if_fail (GTK_IS_IM_CONTEXT (context));
klass = GTK_IM_CONTEXT_GET_CLASS (context);
if (klass->set_client_window)
 klass->set_client_window (context, window);
g_object_set_data(G_OBJECT(context),"window",window);
if(!GDK_IS_WINDOW (window))
 return;
int width = gdk_window_get_width(window);
int height = gdk_window_get_height(window);
if(width != 0 && height !=0)
 gtk_im_context_focus_in(context);
}
```

- 2.安装编译依赖

```
 sudo apt-get install build-essential
 sudo apt-get install libgtk2.0-dev
```

- 3.将上一步的代码编译成共享库libsublime-imfix.so（有些命令可能没有安装，根据提示安装即可）

```
cd ~
gcc -shared -o libsublime-imfix.so sublime_imfix.c  `pkg-config --libs --cflags gtk+-2.0` -fPIC
```

- 4.然后将libsublime-imfix.so拷贝到sublime_text所在文件夹

```
sudo mv libsublime-imfix.so /opt/sublime_text/
```

- 5.修改文件/usr/bin/subl的内容

```
sudo gedit /usr/bin/subl
```

将

```
#!/bin/sh
exec /opt/sublime_text/sublime_text "$@"
```

修改为

```
#!/bin/sh
LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text "$@"
```

> 此时，在终端执行subl可以使用搜狗中文输入了

- 6.修改/usr/share/applications/sublime_text.desktop

```
sudo subl /usr/share/applications/sublime_text.desktop
```

```
将[Desktop Entry]中的字符串Exec=/opt/sublime_text/sublime_text %F修改为
Exec=bash -c "LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text %F"
将[Desktop Action Window]中的字符串Exec=/opt/sublime_text/sublime_text -n修改为
Exec=bash -c "LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text -n"
将[Desktop Action Document]中的字符串Exec=/opt/sublime_text/sublime_text --command new_file修改为
Exec=bash -c "LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text --command new_file"
```

> 此时，使用右键st打开的文件也可以使用搜狗中文输入了

- 7.修改另一个sublime-text.desktop：~/.local/share/applications/sublime_text.desktop（具体位置要看安装路径，可能还没有）

```
将[Desktop Entry]中的字符串Exec=/opt/sublime_text/sublime_text修改为
Exec=bash -c "LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text %F"
```

> 此时，在启动器打开st也可以使用搜狗中文输入了

> 有时在搜狗输入法下，backspace键会直接删除sublime中的文本，而不是输入法中的拼音。此时重启sublime即可

#### Sublime3注册码

> 网上自行查找，下贴一幅，可能已失效

```
----- BEGIN LICENSE -----
sgbteam
Single User License
EA7E-1153259
8891CBB9 F1513E4F 1A3405C1 A865D53F
115F202E 7B91AB2D 0D2A40ED 352B269B
76E84F0B CD69BFC7 59F2DFEF E267328F
215652A3 E88F9D8F 4C38E3BA 5B2DAAE4
969624E7 DC9CD4D5 717FB40C 1B9738CF
20B3C4F1 E917B5B3 87C38D9C ACCE7DD8
5F7EF854 86B9743C FADC04AA FB0DA5C0
F913BE58 42FEA319 F954EFDD AE881E0B
------ END LICENSE ------
```