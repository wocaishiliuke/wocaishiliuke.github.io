---
title: Jsp基础
date: 2018-10-16 00:00:00
categories:
    - Jsp
tags:
    - Jsp
    - Servlet
    - Basic
---

本文介绍Jsp的基本内容

<!-- more -->

##### 目录
+ I.指令

---

# I.指令

JSP中的指令用来约束JSP文件。3个常用指令：page、include、taglib

## 1.page指令

page指令用于限制当前JSP文件中的编码格式、导入Java类包等操作。一般书写在第一行

```html
<%@ page  key=value  key=value ...%>
```

> page指令的属性可以拆开，也可以合并

```html
<%@ page pageEncoding="UTF-8" language="java" import="com.baicai.pojo.User"%>
<!-- 拆分 -->
<%@ page import="com.baicai.pojo.User" %>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
```

#### 1.1 language属性

声明当前JSP中可以使用的编程语言，默认就是Java

> sun公司在设计JSP技术时，希望其他语言也可以使用JSP技术，但最后也只有Java在使用

#### 1.2 import属性

声明当前页面可以使用的类包，在翻译时会在Servlet中进行对应的导包操作。例如导入util包，该页面就可以使用集合等工具类

```html
<%@ page import="java.util.*" %>
```

> JSP会被翻译成Servlet，**并且是HttpServlet的子类**。因此JSP页面可以直接使用Servlet API，不用导入。查看翻译后的Servlet代码，可以查看导入的Servlet相关包

```java
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

import java.util.*
```

> 很多IDE，在JSP文件中的导包提示，像Java文件中一样智能方便

#### 1.3 pageEncoding属性

设置当前JSP页面的编码集，一般建议UTF-8

#### 1.4 contentType属性

设置浏览器解析该JSP时使用的编码集。一般可以不设置，此时浏览器会使用pageEncoding指定的编码集来解析。如果设置，也建议UTF-8

> 新建JSP时，一般情况下page指令默认有language、import、pageEncoding属性

#### 1.5 autoFlush属性

指定使用out对象输出时，是否自动刷新。默认值true，即会自动刷新。一般不做更改。

#### 1.6 buffer属性

设置当前页面的输出流所使用的缓冲区大小，默认8k。一般不做更改。

```java
pageContext = _jspxFactory.getPageContext(this, request, response, null, true, 8192, true); //buffer=8192，autoFlush=true
```

---

# VI.EL基础

EL表达式，可以方便地从容器（page、request、session、ServletContext）中取出数据，替代<%= %>脚本表达式，简化JSP代码

```
${容器Scope.属性名}
```

```
<% request.setAttribute("key", "测试中文1"); %>

<%-- EL表达式 --%>
EL: ${requestScope.key}
```

#### EL和脚本表达式区别

当取不到值时，脚本表达式返回null，EL表达式返回空""

```xml
<%
    request.setAttribute("key", "测试中文1");
    request.setAttribute("key2", "");
%>

<%-- 取不到值时，脚本表达式和EL的区别 --%>
脚本表达式：<%=request.getAttribute("y") %><br/>
EL：${requestScope.y}

empty？：${empty requestScope.key}<br/>
==null？：${requestScope.key == null}<br/>
empty？：${empty requestScope.key2}<br/>
==null？：${requestScope.key2 == null}<br/>
```